package br.edu.ifpe.igarassu.ipi.poo.model.controller;

import java.io.IOException;
import java.io.OutputStream;
import java.net.MalformedURLException;
import java.net.URI;
import java.net.URL;
import java.net.URLDecoder;
import java.security.Principal;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

import com.sun.net.httpserver.HttpContext;
import com.sun.net.httpserver.HttpExchange;
import com.sun.net.httpserver.HttpHandler;

public class AddUserHandler extends AbstractHandler {

	@Override
	public void handle(HttpExchange t) throws IOException {
		printRequestInfo(t);
		System.out.println("add user");
		
 
		Map<String, Object> parsePostParameters = parsePostParameters(t);
		
		super.getDAOUsers().add(new User(parsePostParameters.get("name"), parsePostParameters.get("passwod")));

		String response = "add user";
		t.sendResponseHeaders(200, response.length());
		OutputStream os = t.getResponseBody();
		os.write(response.getBytes());
		os.close();

	}

}
